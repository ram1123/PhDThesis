A set of standard objects used in this analysis is summarized in Table~\ref{tab:objects_final}. More details are given below.  

\begin{table}[htbp]
  \begin{center}
 {\small
  \begin{tabular} {lc}
\hline
  Objects      & Selections \\
  \hline
Triggers       & Single lepton triggers  \\
Primary vertex & Nominal selection  \\
jets           & PF jets, anti-$k_{\rm T}$, $\Delta R = 0.4$  \\
$V$ jets       & Puppi+SD, anti-$k_{\rm T}$, $\Delta R = 0.8$ \\
$\met$         & Type-1 PF $\met$\\
B-tagging      & CSVv2 {\em``Loose''}  \\
Electrons      & tight POG identification criteria  \\
Muons          & tight POG identification criteria   \\
  \hline
  \end{tabular}
}
  \caption{Summary of object selection.\label{tab:objects_final}}
  \end{center}
\end{table}

%%%%%%%%%%%
%%%%%%%%%%%
\subsection{Trigger}
\label{subsec:trigger}
The data samples used in the analysis were taken with the following triggers:
\begin{itemize}
\item HLT\_Ele27\_WPTight\_Gsf\_v* (electron channel)
\item HLT\_IsoTkMu24\_v* or  HLT\_IsoMu24\_v* (muon channel)
\end{itemize}
The trigger efficiencies in data and simulation are measured using tag-and-probe. The ratio of data and simulation efficiencies is found to be consistent with unity within 1\%.


%%%%%%%%%%%
%%%%%%%%%%%
\subsection{Electron selection}
\label{subsec:electrons}
Electrons are selected using the so-called {\em ``Tight''} ID, a full description is available in~\cite{Twiki:EleID}. It consists of a series of requirements on the supercluster shape, impact parameter and geometric distance between the electron track and the supercluster. In addition, an electron veto is applied with the so-called {\em ``Loose''} ID, to reject events with more than two genuine leptons. 

The isolation of the electron candidates is computed from the flux of PF candidates found within a cone of $\Delta R = 0.4$ built around the lepton direction.
The flux of particles is computed independently for the charged hadrons, neutral hadrons and photon candidates. When dealing with electron candidates, the neutral flux is corrected by using the average energy density due to
pileup and underlying event in the central region of the detector ($\rho$)
and an effective area ($A_{\rm eff}$) correction which normalizes this
estimator in such a way that the isolation is independent of the number of pileup interactions. The electron isolation is therefore defined as:

\begin{equation}
I^{e}_{\rm rel}=\frac{1}{p_{\rm T}}  \left[ I_{\rm ch}+\max(I_{\rm nh}+I_{\rm g}-A_{\rm eff}\cdot\rho,0) \right]
\label{eq:eleisol}
\end{equation}

Scale factors are used to correct for differences in the reconstruction, 
identification and isolation efficiencies between data and simulation. They 
are evaluated using the tag and probe technique, and both the scale factors and 
their uncertainty prescriptions are provided by the EGamma POG~\cite{Twiki:EGammaSF2016}.
 

%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%
\subsection{Muon selection}
The muons are selected using standard identification criteria, suggested by the Muon POG~\cite{Twiki:MuonRun2}. Selected muon candidates correspond to the so-called {\em``Tight''} muon identification. Additionally, like in the electron case, a third muon veto is also applied to reject events with more than two genuine leptons using the so-called {\em``Loose''} identification~\cite{Twiki:MuonRun2}. 
For the muon isolation, in the same manner as for electrons, a cone of $\Delta R = 0.4$ is built to compute the flux of particle flow candidates,
the ``delta-beta'' correction is applied to correct for pileup contamination. This correction is achieved by subtracting half the sum of the $\pt$ of the charged particles in the cone of interest but with particles not originating from the primary vertex.

The muon isolation is therefore defined as:
\begin{equation}
I^{\mu}_{\rm rel}=\frac{1}{p_{\rm T}}  \left[ I_{\rm ch}+\max(I_{\rm nh}+I_{\rm g}-0.5\cdot I_{\rm chPU} ,0) \right]
\label{eq:muisol}
\end{equation}
 
Scale factors are used to correct for differences in the reconstruction, identification and isolation efficiencies between data and simulation. They are evaluated using the tag and probe technique, and both the scale factors and their uncertainty prescriptions are provided by the Muon POG~\cite{Twiki:MuonSF2016}.

%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%
\subsection{Jets}
\label{subsec:jets}
Jets are reconstructed using the anti-Kt clustering algorithm~\cite{antikt}  with a distance parameter $R=0.4$, as implemented in the \textsc{fastjet}  package~\cite{Cacciari:fastjet1,Cacciari:fastjet2}. The energy of the reconstructed jets is corrected in 3 steps: L1FastJet (for pileup/underlying event subtraction), L2 (for relative corrections) and L3 for absolute scale corrections. For data an extra residual correction is included in the absolute scale correction.
The used jet energy correction version provided by the jetMET group is Summer16\_23Sep2016BCDV4\_DATA 
(Summer16\_23Sep2016V4\_MC) for data (simulation).

Jets with \pt$>$30~GeV and $\mathopen|\eta\mathclose|<5$ and passing the so called PF-loose requirements are selected. Jets that are within $\Delta R < 0.3$ of one of the identified leptons are excluded from the jet sample. 

\subsection{V-tag jets}
Hadronically decaying gauge boson candidates are reconstructed using the anti-Kt clustering algorithm~\cite{antikt} with a distance parameter $R=0.8$ using the Puppi algorithm~\cite{Bertolini:2014bba}. The $V$-jets that are within $\Delta R < 1.0$ of one of the identified leptons are excluded. The $V$-tag jet mass is computed after employing the modified mass drop tagger algorithm to remove soft, wide-angle radiation from the jets~\cite{Dasgupta:2013ihk,Larkoski:2014wba}. The $N$-subjettiness variable $\tau_N$~\cite{Thaler:2010tr} is also employed to further isolate jets arising from hadronic decays of $W$ or $Z$ bosons.   

The soft-drop mass ($m_{V}$) is corrected following the recommendation in~\cite{jettagging}. The signal region is defined by requiring $\tau_{21}<0.55$ and $ 65 ~\GeV < m_{V} < 105 ~\GeV$. Scale factors are used to correct for differences in selection efficiencies between data and simulation~\cite{jettagging}. Recommended systematic uncertainties in the reference~\cite{jettagging} are propagated in the analysis. 

\subsection{B-tagging}

The selected jets are expected to be mostly coming from gluons or light-quarks
due to initial state radiation. Thus, in order to suppress backgrounds coming from top quarks, events are vetoed if a $b$-tagged jet is found.
Jets with $\pt$ greater than 30 $\GeV$ and lying within the tracker fiducial region ($\left|\eta\right|<2.4$) are considered as $b$-taggable.
A jet is tagged as a $b$-jet candidate if its Combined Secondary Vertex (CSVv2) discriminator is greater than 0.5426~\cite{Twiki:BtagRecommendation80X} (medium working point). To define the top control region, the tight working point (CSVv2 $>$ 0.9535) is used. The recipe provided by the BTV group~\cite{Twiki:BTAGPOGSF} using the recommended measurements has been used to reweight the b-tagging (in)efficiencies of the selected jets.


%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%
\subsection{Missing transverse energy}
Missing transverse energy is estimated from the imbalance of the transverse momentum of all the reconstructed PF candidates. The standard PF $\ptmiss$ using the Type-1 corrections is used. 
